syntax = "proto2";

message ProfileObject {
    optional string name = 1;
    optional string lastname = 2;
}

message AuthObject {
  required string email = 1;
  optional string username = 2;
  required ProfileObject profile = 3;
}

message SignupRequest {
  required string email = 1;
  optional string username = 2;
  required string password = 3;
  required string role = 4;
  optional ProfileObject profile = 5;
}

message SigninRequest {
  required string username = 1; // email or username
  required string password = 2;
}

message SignupResponse {
  required AuthObject auth = 1;
}

message SigninResponse {
    required AuthObject auth = 1;
    required string authToken = 2;
}

service Auth {
  rpc signup (SignupRequest) returns (SignupResponse);
  rpc signin (SigninRequest) returns (SigninResponse);
}
